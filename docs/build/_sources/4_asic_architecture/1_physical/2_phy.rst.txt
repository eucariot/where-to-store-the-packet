PHY
=====

Этот зверь тоже по-своему интересен.
Его задачи незамысловаты:

    * Конвертация сигнала между средами (оптика-медь), если это нужно
    * Восстановление битов из сигналов и наоборот
    * Коррекция ошибок
    * Синхронизация
    * И другие задачи физического уровня.


*Если хочется знать больше, и не пугают забористые тексты со страшными картинками: `PHY Interface for PCI Express, SATA, USB 3.1, DisplayPort, and Converged IO Architectures <https://www.intel.com/content/dam/www/public/us/en/documents/white-papers/phy-interface-pci-express-sata-usb30-architectures-3-1.pdf>`_.*

Что действительно любопытно и достойно обсуждения - так это его расположение.
Если порт медный - RJ45, то чип PHY - это ASIC, установленный на плате.

    .. figure:: https://fs.linkmeup.ru/images/articles/buffers/phy.png           
           :width: 400
           :align: center

Если порт оптический, то в подавляющем большинстве случаев эти функции возьмёт на себя DSP PHY, встроенный в трансивер (та самая штука, называемая нами модулем и вставляемая в дырку в коммутаторе).

    .. figure:: https://fs.linkmeup.ru/images/articles/buffers/dsp_phy.png           
           :width: 500
           :align: center
 
*`Источник <https://www.inphi.com/products/optical-phy/>`_.*

Однако тенденции последних лет - это **Silicon Photonics**. 

Самый производительный коммерческий чип сегодня выдаёт 25,6 Тб/с. Это серьёзнейший инженерный вызов разработчикам. И нет никаких оснований полагать, что гиперскейлеры и экзаскейлеры умерят свои аппетиты и решат остановиться на этом. Скорость будет расти.
Чип PHY находится на трансиверах, а SerDes - на кристалле сетевой микросехмы. Сигнал между ними идёт по электропроводящей среде - по металлической дорожке. С увеличением скоростей растёт и конструктивная сложность и потребляемое электричество. Рано или поздно (скорее, рано) мы во что-нибудь упрёмся.

В случае silicon photonics микросхема PHY переносится внутрь самого чипа коммутации. В кристалл "встраиваются" фотонные порты, позволяющие осуществлять коммуникации между чипами на скорости света через оптическую среду. 

    .. figure:: https://fs.linkmeup.ru/images/articles/buffers/sip.jpg           
           :width: 600
           :align: center

*`Источник <https://seekingalpha.com/article/4276568-important-development-of-this-century>`_.*

Идея не новая, и только ожидавшая своего времени, а именно, когда технологии достигнут нужного уровня зрелости.
Проблема была в том, что материалы и процессы, используемые для производства фотонных чипов, были фундаментально несовместимы с процессом производства кремниевых чипов - `CMOS <https://ru.wikipedia.org/wiki/%D0%9A%D0%9C%D0%9E%D0%9F>`_.

Из возможных альтернативных решений: установка на плату отдельного чипа, преобразующего электрический сигнал в оптический, или его установка внутрь сетевого чипа, но не на сам кристалл (всё ещё требует конвертации среды).

    .. figure:: https://fs.linkmeup.ru/images/articles/buffers/sip_options.jpg           
           :width: 500
           :align: center

Но эта технологическая плотина смыта упорными разработками в этом направлении, и в скором будущем микроэлектронику ждут большие изменения. 

Весьма `занимательная статья <https://seekingalpha.com/article/4276568-important-development-of-this-century>`_ с историей вопроса и сегодняшними реалиями.

    Кстати, был у нас в `гостях Compass EOS <https://linkmeup.ru/blog/164.html>`_, которые разработали co-packaged optics ещё до того, как это стало модным. Но, увы, они настолько опередили своё время, что оказались в тот момент никому не нужны. И постигла их ужасающе печальная судьба быть купленным не то Ростелекомом, не то Роснано. Впрочем, возможно, история звучала совсем иначе :).

    И прямо во время написания этой статьи 5-го марта 2х20 Intel `опубликовал в своём блоге новость <https://newsroom.intel.com/news/intel-demonstrates-industry-first-co-packaged-optics-ethernet-switch/>`_ о том, что они продемонстрировали первый свитч, в котором им удалось интегрировать свой интеловский silicon photonics в барефутовский Tofino2.

        .. figure:: https://fs.linkmeup.ru/images/articles/buffers/intel_sp.jpg           
           :width: 600
           :align: center

    *`Источник <https://newsroom.intel.com/news/intel-demonstrates-industry-first-co-packaged-optics-ethernet-switch/>`_.*

Напоследок хочется немного времени посвятить прям совсем кишочкам, скрытым под металлической крышкой.